{"ast":null,"code":"import _regeneratorRuntime from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/src/App.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Connection, PublicKey, clusterApiUrl } from '@solana/web3.js';\nimport { TwitterTweetEmbed } from 'react-twitter-embed';\nimport { Program, Provider, web3, BN } from '@project-serum/anchor';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Accordion from 'react-bootstrap/Accordion';\nimport idl from './idl.json';\nimport kp from './keypair.json'; // SystemProgram is a reference to the Solana runtime!\n\nvar SystemProgram = web3.SystemProgram,\n    Keypair = web3.Keypair; // Create a keypair for the account that will hold the tweet data.\n\nvar arr = Object.values(kp._keypair.secretKey);\nvar secret = new Uint8Array(arr);\nvar baseAccount = web3.Keypair.fromSecretKey(secret); // Get our program's id from the IDL file.\n\nvar programID = new PublicKey(idl.metadata.address); // Set our network to devnet.\n\nvar network = clusterApiUrl('devnet'); // Controls how we want to acknowledge when a transaction is \"done\".\n\nvar opts = {\n  preflightCommitment: \"processed\"\n};\n\nfunction getTweetID(tweetURL) {\n  var pathComponents = tweetURL.split(\"/\");\n  var idWithQuery = pathComponents[pathComponents.length - 1];\n  var tweetId = idWithQuery.split(\"?\")[0];\n  return tweetId;\n}\n\nfunction isResubmission(tweet_id, list_of_tweets) {\n  for (var i = 0; i < list_of_tweets.length; i++) {\n    if (list_of_tweets[i]['tweetId'] === tweet_id) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar App = function App() {\n  // State\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      walletAddress = _useState2[0],\n      setWalletAddress = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputValueTweet = _useState4[0],\n      setInputValueTweet = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inputValueEffort = _useState6[0],\n      setInputValueEffort = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      inputValueReward = _useState8[0],\n      setInputValueReward = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      tokens = _useState10[0],\n      setTokens = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      tweets = _useState12[0],\n      setTweets = _useState12[1];\n  /*\n   * This function holds the logic for deciding if a Phantom Wallet is\n   * connected or not\n   */\n\n\n  var checkIfWalletIsConnected = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _window, solana, response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _window = window, solana = _window.solana;\n\n              if (!solana) {\n                _context.next = 12;\n                break;\n              }\n\n              if (!solana.isPhantom) {\n                _context.next = 10;\n                break;\n              }\n\n              console.log('Phantom wallet found!');\n              /*\n               * The solana object gives us a function that will allow us to\n               * connect directly with the user's wallet!\n               */\n\n              _context.next = 7;\n              return solana.connect({\n                onlyIfTrusted: true\n              });\n\n            case 7:\n              response = _context.sent;\n              console.log('Connected with Public Key:', response.publicKey.toString());\n              /*\n               * Set the user's publicKey in state to be used later!\n               */\n\n              setWalletAddress(response.publicKey.toString());\n\n            case 10:\n              _context.next = 13;\n              break;\n\n            case 12:\n              alert('Solana object not found! Get a Phantom Wallet ðŸ‘»');\n\n            case 13:\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15]]);\n    }));\n\n    return function checkIfWalletIsConnected() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /*\n   * Let's define this method so our code doesn't break.\n   * We will write the logic for this next!\n   */\n\n\n  var connectWallet = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _window2, solana, response, provider, program;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _window2 = window, solana = _window2.solana;\n\n              if (!solana) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 4;\n              return solana.connect();\n\n            case 4:\n              response = _context2.sent;\n              //register User\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context2.next = 9;\n              return program.rpc.registerUser({\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 9:\n              console.log('Connected with Public Key:', response.publicKey.toString());\n              setWalletAddress(response.publicKey.toString());\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function connectWallet() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var disconnectWallet = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _window3, solana, response;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log('trying to dc');\n              _window3 = window, solana = _window3.solana;\n\n              if (!solana) {\n                _context3.next = 7;\n                break;\n              }\n\n              _context3.next = 5;\n              return solana.disconnect();\n\n            case 5:\n              response = _context3.sent;\n              setWalletAddress(null);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function disconnectWallet() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var sendTweet = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var provider, program, account, tweetID, resubmission;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(inputValueTweet.length === 0)) {\n                _context4.next = 3;\n                break;\n              }\n\n              console.log(\"not a tweet\"); //could be better\n\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              setInputValueTweet('');\n              console.log('Link to tweet:', inputValueTweet);\n              _context4.prev = 5;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context4.next = 10;\n              return program.account.baseAccount.fetch(baseAccount.publicKey);\n\n            case 10:\n              account = _context4.sent;\n              tweetID = getTweetID(inputValueTweet);\n              resubmission = isResubmission(tweetID, tweets);\n\n              if (resubmission) {\n                _context4.next = 24;\n                break;\n              }\n\n              if (!(inputValueEffort.length === 0 || inputValueReward === 0)) {\n                _context4.next = 17;\n                break;\n              }\n\n              console.log(\"need effort & reward for a new tweet\");\n              return _context4.abrupt(\"return\");\n\n            case 17:\n              setInputValueTweet('');\n              setInputValueEffort('');\n              setInputValueReward('');\n              _context4.next = 22;\n              return program.rpc.submitTweet(tweetID, new BN(inputValueEffort), new BN(inputValueReward), {\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 22:\n              _context4.next = 26;\n              break;\n\n            case 24:\n              _context4.next = 26;\n              return program.rpc.resubmitTweet(tweetID, {\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 26:\n              _context4.next = 28;\n              return getTweets();\n\n            case 28:\n              _context4.next = 33;\n              break;\n\n            case 30:\n              _context4.prev = 30;\n              _context4.t0 = _context4[\"catch\"](5);\n              console.log(\"Error sending tweet:\", _context4.t0);\n\n            case 33:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[5, 30]]);\n    }));\n\n    return function sendTweet() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  /*\n   * We want to render this UI when the user hasn't connected\n   * their wallet to our app yet.\n   */\n\n\n  var renderNotConnectedContainer = function renderNotConnectedContainer() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"cta-button connect-wallet-button\",\n      onClick: connectWallet,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 5\n      }\n    }, \"Connect to Wallet\");\n  };\n\n  var onInputChangeTweet = function onInputChangeTweet(event) {\n    var value = event.target.value;\n    setInputValueTweet(value);\n  };\n\n  var onInputChangeReward = function onInputChangeReward(event) {\n    var value = event.target.value;\n    setInputValueReward(value);\n  };\n\n  var onInputChangeEffort = function onInputChangeEffort(event) {\n    var value = event.target.value;\n    setInputValueEffort(value);\n  };\n\n  var getProvider = function getProvider() {\n    var connection = new Connection(network, opts.preflightCommitment);\n    var provider = new Provider(connection, window.solana, opts.preflightCommitment);\n    return provider;\n  };\n\n  var createTweetAccount = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var provider, program;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context5.next = 5;\n              return program.rpc.startProgram({\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey,\n                  systemProgram: SystemProgram.programId\n                },\n                signers: [baseAccount]\n              });\n\n            case 5:\n              console.log(\"Created a new BaseAccount w/ address:\", baseAccount.publicKey.toString());\n              _context5.next = 8;\n              return getTweets();\n\n            case 8:\n              _context5.next = 13;\n              break;\n\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.log(\"Error creating BaseAccount account:\", _context5.t0);\n\n            case 13:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 10]]);\n    }));\n\n    return function createTweetAccount() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  /*function MiningInfo(props) {\n    if (props.locked) {\n      return <div>\n        <p color='green'>current effort: {props.currentEffort}</p>\n        <p>tweet mined by: {props.miner}</p>\n        </div>;\n    }\n    else {\n      return <div><p color='yellow'>current effort: {props.currentEffort}</p></div>;\n    }\n  }\n  function AuthorInfo(props) {\n    const provider = getProvider();\n    if (props.author === provider.wallet.publicKey) {\n      return <div>\n        <p>required effort: {props.totalEffort}</p>\n        <p>reward tokens: {props.reward}</p>\n        <p>tweet mined by: {props.author}</p>\n        </div>;\n    }\n    else {\n      return <div></div>;\n    }\n  }*/\n\n\n  function TweetBox(props) {\n    if (props.locked) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tweetbox-mined\",\n        key: props.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(TwitterTweetEmbed, {\n        tweetId: props.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 7\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tweetbox-unmined\",\n        key: props.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(TwitterTweetEmbed, {\n        tweetId: props.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 5\n        }\n      }));\n    }\n  }\n\n  function Tokens() {\n    if (walletAddress === null) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    }\n\n    if (tokens === 1) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: \"sub-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 12\n        }\n      }, \"You have 1 tweet token.\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"p\", {\n      className: \"sub-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 10\n      }\n    }, \"You have \", tokens, \" tweet tokens.\");\n  }\n\n  function Disconnect() {\n    if (walletAddress === null) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null);\n    } else {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"cta-button connect-wallet-button\",\n        onClick: disconnectWallet,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 12\n        }\n      }, \"Disconnect\");\n    }\n  }\n\n  var renderConnectedContainer = function renderConnectedContainer() {\n    // If we hit this, it means the program account hasn't been initialized.\n    if (tweets === null) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"connected-container\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"cta-button submit-tweet-button\",\n        onClick: createTweetAccount,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }\n      }, \"Initialize the Program Account (Only needs to be done once)\"));\n    } //conver the things\n    // Otherwise, we're good! Account exists. User can submit tweets.\n    else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"connected-container\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          event.preventDefault();\n          sendTweet();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter a link to a tweet\",\n        value: inputValueTweet,\n        onChange: onInputChangeTweet,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter effort (# resubmissions)\",\n        value: inputValueEffort,\n        onChange: onInputChangeEffort,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter reward (# tokens)\",\n        value: inputValueReward,\n        onChange: onInputChangeReward,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"cta-button submit-tweet-button\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }\n      }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"tweet-grid\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }\n      }, tweets.map(function (twt) {\n        return /*#__PURE__*/React.createElement(TweetBox, {\n          id: twt['tweetId'],\n          locked: twt['locked'],\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 15\n          }\n        });\n      })));\n    }\n  };\n  /*\n      <AuthorInfo totalEffort={twt['requiredEffort']} author={twt['author']}/>\n                <MiningInfo currentEffort={twt['currentEffort']} reward={twt['reward']} locked={twt['locked']}/>\n                 <AuthorInfo totalEffort={twt['requiredEffort']['words']} author={twt['author']}/>\n                <MiningInfo currentEffort={twt['currentEffort']['words']} reward={twt['reward']} locked={twt['locked']}/>\n                 <div className=\"tweet-item\" key={twt['tweetId']}>\n                <TwitterTweetEmbed tweetId={twt['tweetId']}/>\n              </div>\n  */\n\n  /* <p>render green or render current effort is {twt['currentEffort']}</p>\n                <p>poster of tweet: {twt['author']}</p>\n                <p>render if miner != author. mined by: {twt['miner']</p> */\n  //<img src={item.tweetLink} />\n  //                <TwitterTweetEmbed tweetId={getTweetID(item.tweetLink)}/> <TwitterTweetEmbed tweetId={tweetID}/>\n\n  /*\n      background: -webkit-linear-gradient(left, #4e44ce, #35aee2);\n  background: -webkit-linear-gradient(left, #60c657, #35aee2);\n  */\n\n  /*\n   * When our component first mounts, let's check to see if we have a connected\n   * Phantom Wallet\n   */\n\n\n  useEffect(function () {\n    var onLoad = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return checkIfWalletIsConnected();\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function onLoad() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    window.addEventListener('load', onLoad);\n    return function () {\n      return window.removeEventListener('load', onLoad);\n    };\n  }, []);\n\n  var getTweets = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var provider, program, account, twts, i, count, _i;\n\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context7.next = 5;\n              return program.account.baseAccount.fetch(baseAccount.publicKey);\n\n            case 5:\n              account = _context7.sent;\n              console.log(\"Got the account\", account);\n              twts = [];\n              console.log('i have ', account.tokenRegistry[0]['tokens']['words'], ' tokens');\n\n              for (i = 0; i < account.tweets.length; i++) {\n                twts.push(account.tweets[i]);\n                console.log('required effort', account.tweets[i]['requiredEffort']['words']);\n                console.log('current effort', account.tweets[i]['currentEffort']['words']);\n                console.log('this tweet is locked: ', account.tweets[i]['locked']);\n              }\n\n              setTweets(twts);\n              count = 0;\n              _i = 0;\n\n            case 13:\n              if (!(_i < account.tokenRegistry.length)) {\n                _context7.next = 20;\n                break;\n              }\n\n              if (!(account.tokenRegistry[_i]['userAddress'].toString() === walletAddress)) {\n                _context7.next = 17;\n                break;\n              }\n\n              count = account.tokenRegistry[_i]['tokens'].toNumber();\n              return _context7.abrupt(\"break\", 20);\n\n            case 17:\n              _i++;\n              _context7.next = 13;\n              break;\n\n            case 20:\n              console.log(count);\n              setTokens(count);\n              _context7.next = 28;\n              break;\n\n            case 24:\n              _context7.prev = 24;\n              _context7.t0 = _context7[\"catch\"](0);\n              console.log(\"Error in getTweets: \", _context7.t0);\n              setTweets(null);\n\n            case 28:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 24]]);\n    }));\n\n    return function getTweets() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (walletAddress) {\n      console.log('Fetching tweets...');\n      getTweets();\n    }\n  }, [walletAddress]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Accordion, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(Accordion.Item, {\n    eventKey: \"0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Accordion.Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 5\n    }\n  }, \"Read rules before posting\"), /*#__PURE__*/React.createElement(Accordion.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    text: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 25\n    }\n  }, \"Submission rules\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 25\n    }\n  }, \"1. Each wallet is given two tweet tokens (not an actual token on Solana) upon registration.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 25\n    }\n  }, \"2. Submitting a new tweet to the wall requires spending a tweet token. Resubmitting an existing tweet does not\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 25\n    }\n  }, \"3. When a new tweet submitted, the submitter must provide a) the amount of resubmissions it takes to mine the tweet (effort) and b) the amount of tweet tokens (reward) awarded to the miner of the tweet\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 25\n    }\n  }, \"4. The miner of the tweet is defined as the wallet that provides the final resubmission needed to mine the tweet. The submitter cannot be the miner.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 25\n    }\n  }, \"5. The effort and reward of a tweet are known only to the initial poster of the tweet.\")))))), /*#__PURE__*/React.createElement(Disconnect, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: walletAddress ? 'authed-container' : 'container',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 452,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 453,\n      columnNumber: 11\n    }\n  }, \"Tweet Board\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"sub-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 11\n    }\n  }, \"Mined tweets in green. Unmined tweets in yellow. Rules above.\"), /*#__PURE__*/React.createElement(Tokens, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 11\n    }\n  }), !walletAddress && renderNotConnectedContainer(), walletAddress && renderConnectedContainer())));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/src/App.js"],"names":["React","useEffect","useState","Connection","PublicKey","clusterApiUrl","TwitterTweetEmbed","Program","Provider","web3","BN","ListGroup","Accordion","idl","kp","SystemProgram","Keypair","arr","Object","values","_keypair","secretKey","secret","Uint8Array","baseAccount","fromSecretKey","programID","metadata","address","network","opts","preflightCommitment","getTweetID","tweetURL","pathComponents","split","idWithQuery","length","tweetId","isResubmission","tweet_id","list_of_tweets","i","App","walletAddress","setWalletAddress","inputValueTweet","setInputValueTweet","inputValueEffort","setInputValueEffort","inputValueReward","setInputValueReward","tokens","setTokens","tweets","setTweets","checkIfWalletIsConnected","window","solana","isPhantom","console","log","connect","onlyIfTrusted","response","publicKey","toString","alert","error","connectWallet","provider","getProvider","program","rpc","registerUser","accounts","user","wallet","disconnectWallet","disconnect","sendTweet","account","fetch","tweetID","resubmission","submitTweet","resubmitTweet","getTweets","renderNotConnectedContainer","onInputChangeTweet","event","value","target","onInputChangeReward","onInputChangeEffort","connection","createTweetAccount","startProgram","systemProgram","programId","signers","TweetBox","props","locked","id","Tokens","Disconnect","renderConnectedContainer","preventDefault","map","twt","onLoad","addEventListener","removeEventListener","twts","tokenRegistry","push","count","toNumber"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Connection, PublicKey, clusterApiUrl} from '@solana/web3.js';\nimport {TwitterTweetEmbed} from 'react-twitter-embed';\nimport {\n  Program, Provider, web3, BN\n} from '@project-serum/anchor';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Accordion from 'react-bootstrap/Accordion';\n\nimport idl from './idl.json';\nimport kp from './keypair.json'\n\n// SystemProgram is a reference to the Solana runtime!\nconst { SystemProgram, Keypair } = web3;\n\n// Create a keypair for the account that will hold the tweet data.\nconst arr = Object.values(kp._keypair.secretKey)\nconst secret = new Uint8Array(arr)\nconst baseAccount = web3.Keypair.fromSecretKey(secret)\n\n// Get our program's id from the IDL file.\nconst programID = new PublicKey(idl.metadata.address);\n\n// Set our network to devnet.\nconst network = clusterApiUrl('devnet');\n\n// Controls how we want to acknowledge when a transaction is \"done\".\nconst opts = {\n  preflightCommitment: \"processed\"\n}\n\nfunction getTweetID(tweetURL) {\n  const pathComponents = tweetURL.split(\"/\");\n  const idWithQuery = pathComponents[pathComponents.length-1];\n  const tweetId = idWithQuery.split(\"?\")[0];\n  return tweetId\n}\n\nfunction isResubmission(tweet_id,list_of_tweets) {\n  for (let i = 0; i < list_of_tweets.length; i++) { \n    if (list_of_tweets[i]['tweetId'] === tweet_id) {\n      return true;\n    }\n  }\n  return false;\n}\n\nconst App = () => {\n  // State\nconst [walletAddress, setWalletAddress] = useState(null);\nconst [inputValueTweet, setInputValueTweet] = useState('');\nconst [inputValueEffort, setInputValueEffort] = useState('');\nconst [inputValueReward, setInputValueReward] = useState('');\nconst [tokens, setTokens] = useState(0);\n\nconst [tweets, setTweets] = useState([]);\n\n  /*\n   * This function holds the logic for deciding if a Phantom Wallet is\n   * connected or not\n   */\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const { solana } = window;\n\n      if (solana) {\n        if (solana.isPhantom) {\n          console.log('Phantom wallet found!');\n\n        /*\n         * The solana object gives us a function that will allow us to\n         * connect directly with the user's wallet!\n         */\n          const response = await solana.connect({ onlyIfTrusted: true });\n          console.log(\n            'Connected with Public Key:',\n            response.publicKey.toString()\n          );\n\n          /*\n           * Set the user's publicKey in state to be used later!\n           */\n          setWalletAddress(response.publicKey.toString());\n        }\n      } else {\n        alert('Solana object not found! Get a Phantom Wallet ðŸ‘»');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  /*\n   * Let's define this method so our code doesn't break.\n   * We will write the logic for this next!\n   */\n  const connectWallet = async () => {\n  const { solana } = window;\n\n  if (solana) {\n    const response = await solana.connect();\n\n    //register User\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    await program.rpc.registerUser({\n      accounts: {\n        baseAccount: baseAccount.publicKey,\n        user: provider.wallet.publicKey,\n      }\n    });\n\n    console.log('Connected with Public Key:', response.publicKey.toString());\n    setWalletAddress(response.publicKey.toString());\n  }\n};\n\nconst disconnectWallet = async () => {\n  console.log('trying to dc')\n  const { solana } = window;\n  if (solana) {\n    const response = await solana.disconnect();\n    setWalletAddress(null);\n  }\n};\n\nconst sendTweet = async () => {\n  if (inputValueTweet.length === 0) {\n    console.log(\"not a tweet\")\n    //could be better\n    return\n  }\n  setInputValueTweet('');\n  console.log('Link to tweet:', inputValueTweet);\n  try {\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    const account = await program.account.baseAccount.fetch(baseAccount.publicKey);\n    \n    const tweetID = getTweetID(inputValueTweet)\n    const resubmission = isResubmission(tweetID, tweets)\n    if (!resubmission) {\n      if (inputValueEffort.length === 0 || inputValueReward === 0) {\n        console.log(\"need effort & reward for a new tweet\")\n        return\n      }\n      setInputValueTweet('');\n      setInputValueEffort('');\n      setInputValueReward('');\n      await program.rpc.submitTweet(tweetID,new BN((inputValueEffort)),new BN((inputValueReward)), {\n        accounts: {\n          baseAccount: baseAccount.publicKey,\n          user: provider.wallet.publicKey,\n        },\n      });\n    }\n    else {\n      await program.rpc.resubmitTweet(tweetID, {\n        accounts: {\n          baseAccount: baseAccount.publicKey,\n          user: provider.wallet.publicKey,\n        },\n      });\n    }\n    await getTweets();\n  } catch (error) {\n    console.log(\"Error sending tweet:\", error)\n  }\n};\n  /*\n   * We want to render this UI when the user hasn't connected\n   * their wallet to our app yet.\n   */\n  const renderNotConnectedContainer = () => (\n    <button\n      className=\"cta-button connect-wallet-button\"\n      onClick={connectWallet}\n    >\n      Connect to Wallet\n    </button>\n  );\n\n  const onInputChangeTweet = (event) => {\n  const { value } = event.target;\n  setInputValueTweet(value);\n  };\n\n  const onInputChangeReward = (event) => {\n  const { value } = event.target;\n  setInputValueReward(value);\n  };\n\n  const onInputChangeEffort = (event) => {\n  const { value } = event.target;\n  setInputValueEffort(value);\n  };\n\nconst getProvider = () => {\n  const connection = new Connection(network, opts.preflightCommitment);\n  const provider = new Provider(\n    connection, window.solana, opts.preflightCommitment,\n  );\n\treturn provider;\n}\nconst createTweetAccount = async () => {\n  try {\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    await program.rpc.startProgram({\n      accounts: {\n        baseAccount: baseAccount.publicKey,\n        user: provider.wallet.publicKey,\n        systemProgram: SystemProgram.programId,\n      },\n      signers: [baseAccount]\n    });\n    console.log(\"Created a new BaseAccount w/ address:\", baseAccount.publicKey.toString())\n    await getTweets();\n\n  } catch(error) {\n    console.log(\"Error creating BaseAccount account:\", error)\n  }\n}\n\n/*function MiningInfo(props) {\n  if (props.locked) {\n    return <div>\n      <p color='green'>current effort: {props.currentEffort}</p>\n      <p>tweet mined by: {props.miner}</p>\n      </div>;\n  }\n  else {\n    return <div><p color='yellow'>current effort: {props.currentEffort}</p></div>;\n  }\n}\nfunction AuthorInfo(props) {\n  const provider = getProvider();\n  if (props.author === provider.wallet.publicKey) {\n    return <div>\n      <p>required effort: {props.totalEffort}</p>\n      <p>reward tokens: {props.reward}</p>\n      <p>tweet mined by: {props.author}</p>\n      </div>;\n  }\n  else {\n    return <div></div>;\n  }\n}*/\n\nfunction TweetBox(props) {\n  if (props.locked) {\n    return <div className=\"tweetbox-mined\" key={props.id}>\n      <TwitterTweetEmbed tweetId={props.id}/>\n    </div> \n  }\n  else {\n    return <div className=\"tweetbox-unmined\" key={props.id}>\n    <TwitterTweetEmbed tweetId={props.id}/>\n    </div>\n  }\n}\n\nfunction Tokens() {\n  if (walletAddress === null) {\n    return <></>\n  }\n  if (tokens === 1) {\n    return <p className=\"sub-text\">\n    You have 1 tweet token.\n  </p>\n  }\n  return <p className=\"sub-text\">\n    You have {tokens} tweet tokens.\n  </p>\n}\n\nfunction Disconnect() {\n  if (walletAddress === null) {\n    return <></>\n  }\n  else {\n    return <button\n      className=\"cta-button connect-wallet-button\"\n      onClick={disconnectWallet}\n    >Disconnect</button>\n  }\n  \n}\n\nconst renderConnectedContainer = () => {\n  // If we hit this, it means the program account hasn't been initialized.\n    if (tweets === null) {\n      return (\n        <div className=\"connected-container\">\n          <button className=\"cta-button submit-tweet-button\" onClick={createTweetAccount}>\n            Initialize the Program Account (Only needs to be done once)\n          </button>\n        </div>\n      )\n    } \n    //conver the things\n    // Otherwise, we're good! Account exists. User can submit tweets.\n    else {\n      return(\n        <div className=\"connected-container\">\n          <form\n            onSubmit={(event) => {\n              event.preventDefault();\n              sendTweet();\n            }}\n          >\n            <input\n              type=\"text\"\n              placeholder=\"Enter a link to a tweet\"\n              value={inputValueTweet}\n              onChange={onInputChangeTweet}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Enter effort (# resubmissions)\"\n              value={inputValueEffort}\n              onChange={onInputChangeEffort}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Enter reward (# tokens)\"\n              value={inputValueReward}\n              onChange={onInputChangeReward}\n            />\n            <button type=\"submit\" className=\"cta-button submit-tweet-button\">\n              Submit\n            </button>\n          </form>\n          <div className=\"tweet-grid\">\n            {/* We use index as the key instead, also, the src is now item.tweetLink */}\n            {tweets.map(twt => (\n              <TweetBox id={twt['tweetId']} locked={twt['locked']}/>\n            ))}\n          </div>\n        </div>\n      )\n    }\n  }\n\n  /*\n      <AuthorInfo totalEffort={twt['requiredEffort']} author={twt['author']}/>\n                <MiningInfo currentEffort={twt['currentEffort']} reward={twt['reward']} locked={twt['locked']}/>\n\n                <AuthorInfo totalEffort={twt['requiredEffort']['words']} author={twt['author']}/>\n                <MiningInfo currentEffort={twt['currentEffort']['words']} reward={twt['reward']} locked={twt['locked']}/>\n\n                <div className=\"tweet-item\" key={twt['tweetId']}>\n                <TwitterTweetEmbed tweetId={twt['tweetId']}/>\n              </div>\n  */\n\n  /* <p>render green or render current effort is {twt['currentEffort']}</p>\n                <p>poster of tweet: {twt['author']}</p>\n                <p>render if miner != author. mined by: {twt['miner']</p> */\n\n  //<img src={item.tweetLink} />\n  //                <TwitterTweetEmbed tweetId={getTweetID(item.tweetLink)}/> <TwitterTweetEmbed tweetId={tweetID}/>\n\n\n  /*\n      background: -webkit-linear-gradient(left, #4e44ce, #35aee2);\n  background: -webkit-linear-gradient(left, #60c657, #35aee2);\n\n*/\n\n  /*\n   * When our component first mounts, let's check to see if we have a connected\n   * Phantom Wallet\n   */\n  useEffect(() => {\n    const onLoad = async () => {\n      await checkIfWalletIsConnected();\n    };\n    window.addEventListener('load', onLoad);\n    return () => window.removeEventListener('load', onLoad);\n  }, []);\n\n  const getTweets = async() => {\n    try {\n      const provider = getProvider();\n      const program = new Program(idl, programID, provider);\n      const account = await program.account.baseAccount.fetch(baseAccount.publicKey);\n      \n      console.log(\"Got the account\", account)\n      var twts = []\n      console.log('i have ',account.tokenRegistry[0]['tokens']['words'],' tokens')\n\n      for (let i = 0; i < account.tweets.length; i++) { \n        twts.push((account.tweets[i]))\n        console.log('required effort',account.tweets[i]['requiredEffort']['words'])\n        console.log('current effort',account.tweets[i]['currentEffort']['words'])\n        console.log('this tweet is locked: ',account.tweets[i]['locked'])\n      }\n\n      setTweets(twts)\n      var count = 0;\n      for (let i = 0; i < account.tokenRegistry.length; i++) { \n        if (account.tokenRegistry[i]['userAddress'].toString() === walletAddress) {\n          count = account.tokenRegistry[i]['tokens'].toNumber();\n          break;\n        }\n      }\n      console.log(count);\n      setTokens(count);\n  \n    } catch (error) {\n      console.log(\"Error in getTweets: \", error)\n      setTweets(null);\n    }\n  }\n  \n  useEffect(() => {\n    if (walletAddress) {\n      console.log('Fetching tweets...');\n      getTweets()\n    }\n  }, [walletAddress]);\n\n  return (\n    <div className=\"App\">\n\n<Accordion>\n  <Accordion.Item eventKey=\"0\">\n    <Accordion.Header>Read rules before posting</Accordion.Header>\n    <Accordion.Body>\n    <ListGroup>\n        <ListGroup.Item><h1 text='white'>Submission rules</h1></ListGroup.Item>\n        <ListGroup.Item><p>1. Each wallet is given two tweet tokens (not an actual token on Solana) upon registration.</p></ListGroup.Item>\n        <ListGroup.Item><p>2. Submitting a new tweet to the wall requires spending a tweet token. Resubmitting an existing tweet does not</p></ListGroup.Item>\n        <ListGroup.Item><p>3. When a new tweet submitted, the submitter must provide a) the amount of resubmissions it takes to mine the tweet (effort) and b) the amount of tweet tokens (reward) awarded to the miner of the tweet</p></ListGroup.Item>\n        <ListGroup.Item><p>4. The miner of the tweet is defined as the wallet that provides the final resubmission needed to mine the tweet. The submitter cannot be the miner.</p></ListGroup.Item>\n        <ListGroup.Item><p>5. The effort and reward of a tweet are known only to the initial poster of the tweet.</p></ListGroup.Item>\n      </ListGroup>\n    </Accordion.Body>\n  </Accordion.Item>\n</Accordion>\n\n      \n\t\t\t{/* This was solely added for some styling fanciness */}\n      \n      <Disconnect />\n      \n\t\t\t<div className={walletAddress ? 'authed-container' : 'container'}>\n        <div className=\"header-container\">\n          <p className=\"header\">Tweet Board</p>\n          <p className=\"sub-text\">\n            Mined tweets in green. Unmined tweets in yellow. Rules above.\n          </p>\n          <Tokens />\n          \n          {/* Add the condition to show this only if we don't have a wallet address */}\n          {!walletAddress && renderNotConnectedContainer()}\n          {/* We just need to add the inverse here! */}\n        {walletAddress && renderConnectedContainer()}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default App;"]},"metadata":{},"sourceType":"module"}