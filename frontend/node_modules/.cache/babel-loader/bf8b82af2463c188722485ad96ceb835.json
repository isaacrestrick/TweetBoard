{"ast":null,"code":"import _regeneratorRuntime from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/src/App.js\",\n    _this = this;\n\nimport React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Connection, PublicKey, clusterApiUrl } from '@solana/web3.js';\nimport { TwitterTweetEmbed } from 'react-twitter-embed';\nimport { Program, Provider, web3, BN } from '@project-serum/anchor';\nimport Button from 'react-bootstrap/Button';\nimport idl from './idl.json';\nimport kp from './keypair.json';\n\nfunction TweetBox(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    color: \"white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 44\n    }\n  }, \"#\", props.rank)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TwitterTweetEmbed, {\n    tweetId: getTweetID(props.link),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 30\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 30\n    }\n  }, \"Posted by \", props.poster)));\n} // SystemProgram is a reference to the Solana runtime!\n\n\nvar SystemProgram = web3.SystemProgram,\n    Keypair = web3.Keypair; // Create a keypair for the account that will hold the GIF data.\n\nvar arr = Object.values(kp._keypair.secretKey);\nvar secret = new Uint8Array(arr);\nvar baseAccount = web3.Keypair.fromSecretKey(secret); // Get our program's id from the IDL file.\n\nvar programID = new PublicKey(idl.metadata.address); // Set our network to devnet.\n\nvar network = clusterApiUrl('devnet'); // Controls how we want to acknowledge when a transaction is \"done\".\n\nvar opts = {\n  preflightCommitment: \"processed\"\n};\n\nfunction getTweetID(tweetURL) {\n  var pathComponents = tweetURL.split(\"/\");\n  var idWithQuery = pathComponents[pathComponents.length - 1];\n  var tweetId = idWithQuery.split(\"?\")[0];\n  return tweetId;\n}\n\nfunction isResubmission(tweet_id, list_of_tweets) {\n  for (var i = 0; i < list_of_tweets.length; i++) {\n    if (list_of_tweets[i] === tweet_id) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nvar App = function App() {\n  // State\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      walletAddress = _useState2[0],\n      setWalletAddress = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      inputValueTweet = _useState4[0],\n      setInputValueTweet = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      inputValueEffort = _useState6[0],\n      setInputValueEffort = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      inputValueReward = _useState8[0],\n      setInputValueReward = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      tweets = _useState10[0],\n      setTweets = _useState10[1];\n  /*\n   * This function holds the logic for deciding if a Phantom Wallet is\n   * connected or not\n   */\n\n\n  var checkIfWalletIsConnected = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _window, solana, response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _window = window, solana = _window.solana;\n\n              if (!solana) {\n                _context.next = 12;\n                break;\n              }\n\n              if (!solana.isPhantom) {\n                _context.next = 10;\n                break;\n              }\n\n              console.log('Phantom wallet found!');\n              /*\n               * The solana object gives us a function that will allow us to\n               * connect directly with the user's wallet!\n               */\n\n              _context.next = 7;\n              return solana.connect({\n                onlyIfTrusted: true\n              });\n\n            case 7:\n              response = _context.sent;\n              console.log('Connected with Public Key:', response.publicKey.toString());\n              /*\n               * Set the user's publicKey in state to be used later!\n               */\n\n              setWalletAddress(response.publicKey.toString());\n\n            case 10:\n              _context.next = 13;\n              break;\n\n            case 12:\n              alert('Solana object not found! Get a Phantom Wallet ðŸ‘»');\n\n            case 13:\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 15]]);\n    }));\n\n    return function checkIfWalletIsConnected() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  /*\n   * Let's define this method so our code doesn't break.\n   * We will write the logic for this next!\n   */\n\n\n  var connectWallet = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _window2, solana, response, provider, program;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _window2 = window, solana = _window2.solana;\n\n              if (!solana) {\n                _context2.next = 11;\n                break;\n              }\n\n              _context2.next = 4;\n              return solana.connect();\n\n            case 4:\n              response = _context2.sent;\n              //register User\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context2.next = 9;\n              return program.rpc.registerUser({\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 9:\n              console.log('Connected with Public Key:', response.publicKey.toString());\n              setWalletAddress(response.publicKey.toString());\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function connectWallet() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var disconnectWallet = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var _window3, solana, response;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log('trying to dc');\n              _window3 = window, solana = _window3.solana;\n\n              if (!solana) {\n                _context3.next = 7;\n                break;\n              }\n\n              _context3.next = 5;\n              return solana.disconnect();\n\n            case 5:\n              response = _context3.sent;\n              setWalletAddress(null);\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function disconnectWallet() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var sendTweet = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var provider, program, account, tweetID, resubmission;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(inputValueTweet.length === 0)) {\n                _context4.next = 3;\n                break;\n              }\n\n              console.log(\"not a tweet\"); //could be better\n\n              return _context4.abrupt(\"return\");\n\n            case 3:\n              setInputValueTweet('');\n              console.log('Link to tweet:', inputValueTweet);\n              _context4.prev = 5;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context4.next = 10;\n              return program.account.baseAccount.fetch(baseAccount.publicKey);\n\n            case 10:\n              account = _context4.sent;\n              tweetID = getTweetID(inputValueTweet);\n              resubmission = isResubmission(tweetID, tweets);\n\n              if (resubmission) {\n                _context4.next = 24;\n                break;\n              }\n\n              if (!(inputValueEffort.length === 0 || inputValueReward === 0)) {\n                _context4.next = 17;\n                break;\n              }\n\n              console.log(\"need effort & reward for a new tweet\");\n              return _context4.abrupt(\"return\");\n\n            case 17:\n              setInputValueTweet('');\n              setInputValueEffort('');\n              setInputValueReward('');\n              _context4.next = 22;\n              return program.rpc.submitTweet(tweetID, new BN(inputValueEffort), new BN(inputValueReward), {\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 22:\n              _context4.next = 26;\n              break;\n\n            case 24:\n              _context4.next = 26;\n              return program.rpc.resubmitTweet(tweetID, {\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey\n                }\n              });\n\n            case 26:\n              _context4.next = 28;\n              return getTweets();\n\n            case 28:\n              _context4.next = 33;\n              break;\n\n            case 30:\n              _context4.prev = 30;\n              _context4.t0 = _context4[\"catch\"](5);\n              console.log(\"Error sending tweet:\", _context4.t0);\n\n            case 33:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[5, 30]]);\n    }));\n\n    return function sendTweet() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  /*\n   * We want to render this UI when the user hasn't connected\n   * their wallet to our app yet.\n   */\n\n\n  var renderNotConnectedContainer = function renderNotConnectedContainer() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      className: \"cta-button connect-wallet-button\",\n      onClick: connectWallet,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 5\n      }\n    }, \"Connect to Wallet\");\n  };\n\n  var onInputChangeTweet = function onInputChangeTweet(event) {\n    var value = event.target.value;\n    setInputValueTweet(value);\n  };\n\n  var onInputChangeReward = function onInputChangeReward(event) {\n    var value = event.target.value;\n    setInputValueReward(value);\n  };\n\n  var onInputChangeEffort = function onInputChangeEffort(event) {\n    var value = event.target.value;\n    setInputValueEffort(value);\n  };\n\n  var getProvider = function getProvider() {\n    var connection = new Connection(network, opts.preflightCommitment);\n    var provider = new Provider(connection, window.solana, opts.preflightCommitment);\n    return provider;\n  };\n\n  var createTweetAccount = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var provider, program;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context5.next = 5;\n              return program.rpc.startProgram({\n                accounts: {\n                  baseAccount: baseAccount.publicKey,\n                  user: provider.wallet.publicKey,\n                  systemProgram: SystemProgram.programId\n                },\n                signers: [baseAccount]\n              });\n\n            case 5:\n              console.log(\"Created a new BaseAccount w/ address:\", baseAccount.publicKey.toString());\n              _context5.next = 8;\n              return getTweets();\n\n            case 8:\n              _context5.next = 13;\n              break;\n\n            case 10:\n              _context5.prev = 10;\n              _context5.t0 = _context5[\"catch\"](0);\n              console.log(\"Error creating BaseAccount account:\", _context5.t0);\n\n            case 13:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, null, [[0, 10]]);\n    }));\n\n    return function createTweetAccount() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var renderConnectedContainer = function renderConnectedContainer() {\n    // If we hit this, it means the program account hasn't been initialized.\n    if (tweets === null) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"connected-container\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"cta-button submit-gif-button\",\n        onClick: createTweetAccount,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }\n      }, \"Do One-Time Initialization For Tweet Program Account\"));\n    } // Otherwise, we're good! Account exists. User can submit GIFs.\n    else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"connected-container\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          event.preventDefault();\n          sendTweet();\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter a link to a tweet\",\n        value: inputValueTweet,\n        onChange: onInputChangeTweet,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter effort (# resubmissions)\",\n        value: inputValueEffort,\n        onChange: onInputChangeEffort,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Enter reward (# tokens)\",\n        value: inputValueReward,\n        onChange: onInputChangeReward,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"cta-button submit-gif-button\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 13\n        }\n      }, \"Submit\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"gif-grid\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }\n      }, tweets.map(function (tweetID) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"gif-item\",\n          key: tweetID,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(TwitterTweetEmbed, {\n          tweetId: tweetID,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 17\n          }\n        }));\n      })));\n    }\n  }; //<img src={item.gifLink} />\n  //                <TwitterTweetEmbed tweetId={getTweetID(item.gifLink)}/> <TwitterTweetEmbed tweetId={tweetID}/>\n\n  /*\n   * When our component first mounts, let's check to see if we have a connected\n   * Phantom Wallet\n   */\n\n\n  useEffect(function () {\n    var onLoad = /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return checkIfWalletIsConnected();\n\n              case 2:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      return function onLoad() {\n        return _ref6.apply(this, arguments);\n      };\n    }();\n\n    window.addEventListener('load', onLoad);\n    return function () {\n      return window.removeEventListener('load', onLoad);\n    };\n  }, []);\n\n  var getTweets = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7() {\n      var provider, program, account, ids, i;\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              _context7.prev = 0;\n              provider = getProvider();\n              program = new Program(idl, programID, provider);\n              _context7.next = 5;\n              return program.account.baseAccount.fetch(baseAccount.publicKey);\n\n            case 5:\n              account = _context7.sent;\n              console.log(\"Got the account\", account);\n              ids = [];\n              console.log('i have ', account.tokenRegistry[0]['tokens']['words'], ' tokens');\n\n              for (i = 0; i < account.tweets.length; i++) {\n                ids.push(account.tweets[i]['tweetId']);\n                console.log('required effort', account.tweets[i]['requiredEffort']['words']);\n                console.log('current effort', account.tweets[i]['currentEffort']['words']);\n                console.log('this tweet is locked: ', account.tweets[i]['locked']);\n              }\n\n              setTweets(ids);\n              console.log(ids);\n              _context7.next = 18;\n              break;\n\n            case 14:\n              _context7.prev = 14;\n              _context7.t0 = _context7[\"catch\"](0);\n              console.log(\"Error in getTweets: \", _context7.t0);\n              setTweets(null);\n\n            case 18:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7, null, [[0, 14]]);\n    }));\n\n    return function getTweets() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    if (walletAddress) {\n      console.log('Fetching tweets...');\n      getTweets();\n    }\n  }, [walletAddress]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 25\n    }\n  }, \"Submission rules\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 25\n    }\n  }, \"1. Each wallet is given two tweet tokens upon registration.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 25\n    }\n  }, \"2. Submitting a new tweet to the wall requires spending a tweet token. Resubmitting an existing tweet does not\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 25\n    }\n  }, \"3. When a new tweet submitted, the submitter must provide a) the amount of resubmissions it takes to mine the tweet (effort) and b) the amount of tweet tokens (reward) awarded to the miner of the tweet\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 25\n    }\n  }, \"4. The miner of the tweet is defined as the wallet that provides the final resubmission needed to mine the tweet. The submitter cannot be the miner.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345,\n      columnNumber: 25\n    }\n  }, \"5. The effort and reward of a tweet are only visible to the submitter, and hidden from other wallets.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 25\n    }\n  }, \"6. The current effort (# of resubmissions so far) of a token is red if the token is unmined, and green if it is mined. Once a token is mined, further resubmissions do nothing.\")), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    color: \"white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 25\n    }\n  }, \"7. Rules 4 and 6 are not implemented yet. Have fun!\"))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"cta-button connect-wallet-button\",\n    onClick: disconnectWallet,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }\n  }, \"Disconnect\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: walletAddress ? 'authed-container' : 'container',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"header\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 11\n    }\n  }, \"Tweet Portal\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"sub-text\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 11\n    }\n  }, \"Tweet collection\"), !walletAddress && renderNotConnectedContainer(), walletAddress && renderConnectedContainer())));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/isaacrestrick/Desktop/solana_tweets/TweetBoard/frontend/src/App.js"],"names":["React","useEffect","useState","Connection","PublicKey","clusterApiUrl","TwitterTweetEmbed","Program","Provider","web3","BN","Button","idl","kp","TweetBox","props","rank","getTweetID","link","poster","SystemProgram","Keypair","arr","Object","values","_keypair","secretKey","secret","Uint8Array","baseAccount","fromSecretKey","programID","metadata","address","network","opts","preflightCommitment","tweetURL","pathComponents","split","idWithQuery","length","tweetId","isResubmission","tweet_id","list_of_tweets","i","App","walletAddress","setWalletAddress","inputValueTweet","setInputValueTweet","inputValueEffort","setInputValueEffort","inputValueReward","setInputValueReward","tweets","setTweets","checkIfWalletIsConnected","window","solana","isPhantom","console","log","connect","onlyIfTrusted","response","publicKey","toString","alert","error","connectWallet","provider","getProvider","program","rpc","registerUser","accounts","user","wallet","disconnectWallet","disconnect","sendTweet","account","fetch","tweetID","resubmission","submitTweet","resubmitTweet","getTweets","renderNotConnectedContainer","onInputChangeTweet","event","value","target","onInputChangeReward","onInputChangeEffort","connection","createTweetAccount","startProgram","systemProgram","programId","signers","renderConnectedContainer","preventDefault","map","onLoad","addEventListener","removeEventListener","ids","tokenRegistry","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport { Connection, PublicKey, clusterApiUrl} from '@solana/web3.js';\nimport {TwitterTweetEmbed} from 'react-twitter-embed';\nimport {\n  Program, Provider, web3, BN\n} from '@project-serum/anchor';\n\nimport Button from 'react-bootstrap/Button';\n\nimport idl from './idl.json';\nimport kp from './keypair.json'\n\nfunction TweetBox(props) {\n  return <div>\n    <div className='wrapper' color='white'><h1>#{props.rank}</h1></div>\n    <div className='wrapper'><TwitterTweetEmbed tweetId={getTweetID(props.link)}/></div>\n    <div className='wrapper'><h3>Posted by {props.poster}</h3></div>\n  </div>\n}\n\n// SystemProgram is a reference to the Solana runtime!\nconst { SystemProgram, Keypair } = web3;\n\n// Create a keypair for the account that will hold the GIF data.\nconst arr = Object.values(kp._keypair.secretKey)\nconst secret = new Uint8Array(arr)\nconst baseAccount = web3.Keypair.fromSecretKey(secret)\n\n// Get our program's id from the IDL file.\nconst programID = new PublicKey(idl.metadata.address);\n\n// Set our network to devnet.\nconst network = clusterApiUrl('devnet');\n\n// Controls how we want to acknowledge when a transaction is \"done\".\nconst opts = {\n  preflightCommitment: \"processed\"\n}\n\nfunction getTweetID(tweetURL) {\n  const pathComponents = tweetURL.split(\"/\");\n  const idWithQuery = pathComponents[pathComponents.length-1];\n  const tweetId = idWithQuery.split(\"?\")[0];\n  return tweetId\n}\n\nfunction isResubmission(tweet_id,list_of_tweets) {\n  for (let i = 0; i < list_of_tweets.length; i++) { \n    if (list_of_tweets[i] === tweet_id) {\n      return true;\n    }\n  }\n  return false;\n}\n\nconst App = () => {\n  // State\nconst [walletAddress, setWalletAddress] = useState(null);\nconst [inputValueTweet, setInputValueTweet] = useState('');\nconst [inputValueEffort, setInputValueEffort] = useState('');\nconst [inputValueReward, setInputValueReward] = useState('');\n\nconst [tweets, setTweets] = useState([]);\n\n  /*\n   * This function holds the logic for deciding if a Phantom Wallet is\n   * connected or not\n   */\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const { solana } = window;\n\n      if (solana) {\n        if (solana.isPhantom) {\n          console.log('Phantom wallet found!');\n\n        /*\n         * The solana object gives us a function that will allow us to\n         * connect directly with the user's wallet!\n         */\n          const response = await solana.connect({ onlyIfTrusted: true });\n          console.log(\n            'Connected with Public Key:',\n            response.publicKey.toString()\n          );\n\n          /*\n           * Set the user's publicKey in state to be used later!\n           */\n          setWalletAddress(response.publicKey.toString());\n        }\n      } else {\n        alert('Solana object not found! Get a Phantom Wallet ðŸ‘»');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  /*\n   * Let's define this method so our code doesn't break.\n   * We will write the logic for this next!\n   */\n  const connectWallet = async () => {\n  const { solana } = window;\n\n  if (solana) {\n    const response = await solana.connect();\n\n    //register User\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    await program.rpc.registerUser({\n      accounts: {\n        baseAccount: baseAccount.publicKey,\n        user: provider.wallet.publicKey,\n      }\n    });\n\n    console.log('Connected with Public Key:', response.publicKey.toString());\n    setWalletAddress(response.publicKey.toString());\n  }\n};\n\nconst disconnectWallet = async () => {\n  console.log('trying to dc')\n  const { solana } = window;\n  if (solana) {\n    const response = await solana.disconnect();\n    setWalletAddress(null);\n  }\n};\n\nconst sendTweet = async () => {\n  if (inputValueTweet.length === 0) {\n    console.log(\"not a tweet\")\n    //could be better\n    return\n  }\n  setInputValueTweet('');\n  console.log('Link to tweet:', inputValueTweet);\n  try {\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    const account = await program.account.baseAccount.fetch(baseAccount.publicKey);\n    \n    const tweetID = getTweetID(inputValueTweet)\n    const resubmission = isResubmission(tweetID, tweets)\n    if (!resubmission) {\n      if (inputValueEffort.length === 0 || inputValueReward === 0) {\n        console.log(\"need effort & reward for a new tweet\")\n        return\n      }\n      setInputValueTweet('');\n      setInputValueEffort('');\n      setInputValueReward('');\n      await program.rpc.submitTweet(tweetID,new BN((inputValueEffort)),new BN((inputValueReward)), {\n        accounts: {\n          baseAccount: baseAccount.publicKey,\n          user: provider.wallet.publicKey,\n        },\n      });\n    }\n    else {\n      await program.rpc.resubmitTweet(tweetID, {\n        accounts: {\n          baseAccount: baseAccount.publicKey,\n          user: provider.wallet.publicKey,\n        },\n      });\n    }\n    await getTweets();\n  } catch (error) {\n    console.log(\"Error sending tweet:\", error)\n  }\n};\n  /*\n   * We want to render this UI when the user hasn't connected\n   * their wallet to our app yet.\n   */\n  const renderNotConnectedContainer = () => (\n    <button\n      className=\"cta-button connect-wallet-button\"\n      onClick={connectWallet}\n    >\n      Connect to Wallet\n    </button>\n  );\n\n  const onInputChangeTweet = (event) => {\n  const { value } = event.target;\n  setInputValueTweet(value);\n  };\n\n  const onInputChangeReward = (event) => {\n  const { value } = event.target;\n  setInputValueReward(value);\n  };\n\n  const onInputChangeEffort = (event) => {\n  const { value } = event.target;\n  setInputValueEffort(value);\n  };\n\nconst getProvider = () => {\n  const connection = new Connection(network, opts.preflightCommitment);\n  const provider = new Provider(\n    connection, window.solana, opts.preflightCommitment,\n  );\n\treturn provider;\n}\nconst createTweetAccount = async () => {\n  try {\n    const provider = getProvider();\n    const program = new Program(idl, programID, provider);\n    await program.rpc.startProgram({\n      accounts: {\n        baseAccount: baseAccount.publicKey,\n        user: provider.wallet.publicKey,\n        systemProgram: SystemProgram.programId,\n      },\n      signers: [baseAccount]\n    });\n    console.log(\"Created a new BaseAccount w/ address:\", baseAccount.publicKey.toString())\n    await getTweets();\n\n  } catch(error) {\n    console.log(\"Error creating BaseAccount account:\", error)\n  }\n}\n\nconst renderConnectedContainer = () => {\n  // If we hit this, it means the program account hasn't been initialized.\n    if (tweets === null) {\n      return (\n        <div className=\"connected-container\">\n          <button className=\"cta-button submit-gif-button\" onClick={createTweetAccount}>\n            Do One-Time Initialization For Tweet Program Account\n          </button>\n        </div>\n      )\n    } \n    // Otherwise, we're good! Account exists. User can submit GIFs.\n    else {\n      return(\n        <div className=\"connected-container\">\n          <form\n            onSubmit={(event) => {\n              event.preventDefault();\n              sendTweet();\n            }}\n          >\n            <input\n              type=\"text\"\n              placeholder=\"Enter a link to a tweet\"\n              value={inputValueTweet}\n              onChange={onInputChangeTweet}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Enter effort (# resubmissions)\"\n              value={inputValueEffort}\n              onChange={onInputChangeEffort}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Enter reward (# tokens)\"\n              value={inputValueReward}\n              onChange={onInputChangeReward}\n            />\n            <button type=\"submit\" className=\"cta-button submit-gif-button\">\n              Submit\n            </button>\n          </form>\n          <div className=\"gif-grid\">\n            {/* We use index as the key instead, also, the src is now item.gifLink */}\n            {tweets.map(tweetID => (\n              <div className=\"gif-item\" key={tweetID}>\n                <TwitterTweetEmbed tweetId={tweetID}/>\n              </div>\n            ))}\n          </div>\n        </div>\n      )\n    }\n  }\n  //<img src={item.gifLink} />\n  //                <TwitterTweetEmbed tweetId={getTweetID(item.gifLink)}/> <TwitterTweetEmbed tweetId={tweetID}/>\n\n\n  /*\n   * When our component first mounts, let's check to see if we have a connected\n   * Phantom Wallet\n   */\n  useEffect(() => {\n    const onLoad = async () => {\n      await checkIfWalletIsConnected();\n    };\n    window.addEventListener('load', onLoad);\n    return () => window.removeEventListener('load', onLoad);\n  }, []);\n\n  const getTweets = async() => {\n    try {\n      const provider = getProvider();\n      const program = new Program(idl, programID, provider);\n      const account = await program.account.baseAccount.fetch(baseAccount.publicKey);\n      \n      console.log(\"Got the account\", account)\n      var ids = []\n      console.log('i have ',account.tokenRegistry[0]['tokens']['words'],' tokens')\n\n      for (let i = 0; i < account.tweets.length; i++) { \n        ids.push((account.tweets[i]['tweetId']))\n        console.log('required effort',account.tweets[i]['requiredEffort']['words'])\n        console.log('current effort',account.tweets[i]['currentEffort']['words'])\n        console.log('this tweet is locked: ',account.tweets[i]['locked'])\n      }\n\n      setTweets(ids)\n      console.log(ids)\n  \n    } catch (error) {\n      console.log(\"Error in getTweets: \", error)\n      setTweets(null);\n    }\n  }\n  \n  useEffect(() => {\n    if (walletAddress) {\n      console.log('Fetching tweets...');\n      getTweets()\n    }\n  }, [walletAddress]);\n\n  return (\n    <div className=\"App\">\n      <ListGroup>\n        <ListGroup.Item><h6>Submission rules</h6></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">1. Each wallet is given two tweet tokens upon registration.</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">2. Submitting a new tweet to the wall requires spending a tweet token. Resubmitting an existing tweet does not</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">3. When a new tweet submitted, the submitter must provide a) the amount of resubmissions it takes to mine the tweet (effort) and b) the amount of tweet tokens (reward) awarded to the miner of the tweet</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">4. The miner of the tweet is defined as the wallet that provides the final resubmission needed to mine the tweet. The submitter cannot be the miner.</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">5. The effort and reward of a tweet are only visible to the submitter, and hidden from other wallets.</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">6. The current effort (# of resubmissions so far) of a token is red if the token is unmined, and green if it is mined. Once a token is mined, further resubmissions do nothing.</p></ListGroup.Item>\n        <ListGroup.Item><p color=\"white\">7. Rules 4 and 6 are not implemented yet. Have fun!</p></ListGroup.Item>\n      </ListGroup>\n\t\t\t{/* This was solely added for some styling fanciness */}\n      <button\n      className=\"cta-button connect-wallet-button\"\n      onClick={disconnectWallet}\n    >Disconnect</button>\n\t\t\t<div className={walletAddress ? 'authed-container' : 'container'}>\n        <div className=\"header-container\">\n          <p className=\"header\">Tweet Portal</p>\n          <p className=\"sub-text\">\n            Tweet collection\n          </p>\n          {/* Add the condition to show this only if we don't have a wallet address */}\n          {!walletAddress && renderNotConnectedContainer()}\n          {/* We just need to add the inverse here! */}\n        {walletAddress && renderConnectedContainer()}\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default App;"]},"metadata":{},"sourceType":"module"}